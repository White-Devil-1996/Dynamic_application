<div class="">
  <div class="">
    <div class="card-controls" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
      <div class="search-wrapper" style="display:flex;align-items:center;gap:8px;">
        <i class="fa fa-search search-icon"></i>
        <input class="search-input" [(ngModel)]="searchText" placeholder="Search label / value / key" />
      </div>

      <div style="display:flex;gap:6px;margin-left:auto;">
        <button class="btn small pink" (click)="exportCSV()" title="Export CSV"><i class="fa fa-upload"></i></button>
        <button class="btn small pink" (click)="goToAddForm()" title="Add Customer"><i class="fa fa-plus"></i></button>
      </div>
    </div>
  </div>

  <div class="table-wrapper" style="margin-top:12px;">
    <table class="table table-striped table-responsive" style="width:100%;">
      <thead>
        <tr>
          <th class="tiny-col">S.No</th>
          <th (click)="toggleSort('id')" class="clickable">ID
            <i *ngIf="sortColumn === 'id'" class="fa ms-1"
              [ngClass]="sortDirection==='asc' ? 'fa-sort-asc' : 'fa-sort-desc'"></i>
          </th>

          <th *ngFor="let col of columns" (click)="toggleSort(col.key)" class="clickable">
            {{ col.label }}
            <i *ngIf="sortColumn === col.key" class="fa ms-1"
              [ngClass]="sortDirection==='asc' ? 'fa-sort-asc' : 'fa-sort-desc'"></i>
          </th>

          <th class="action-col">Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="
      let rec of (filteredRecords | paginate: { itemsPerPage: itemsPerPage, currentPage: pPage, id: 'pg1' });
      let idx = index;
      trackBy: trackByRecord
    ">
          <td>{{ (pPage - 1) * itemsPerPage + idx + 1 }}</td>
          <td>{{ rec.id }}</td>

          <td *ngFor="let col of columns">
            <ng-container *ngIf="!isObject(getValue(rec, col.key))">
              {{ getValue(rec, col.key) ?? 'â€”' }}
            </ng-container>
            <ng-container *ngIf="isObject(getValue(rec, col.key))">
              {{ getValue(rec, col.key) | json }}
            </ng-container>
            <span *ngIf="col.currency"> &nbsp; ({{ col.currency }})</span>
          </td>

        <td class="action-col">
  <!-- VIEW -->
  <button class="btn icon" style="color: var(--primary);" title="View" (click)="goToViewForm(rec)">
    <i class="fa fa-eye" aria-hidden="true"></i>
  </button>

  <!-- EDIT -->
  <button class="btn icon" style="color: var(--primary);" title="Edit" (click)="goToEditForm(rec)">
    <i class="fa fa-pencil" aria-hidden="true"></i>
  </button>

  <!-- DELETE -->
  <button class="btn icon" style="color: var(--primary);" title="Delete" (click)="confirmDelete(rec.id)">
    <i class="fa fa-trash text-danger" aria-hidden="true"></i>
  </button>
</td>
        </tr>

        <tr *ngIf="filteredRecords.length === 0">
          <td [attr.colspan]="2 + columns.length + 1" class="no-records">No records found.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="footer-row" style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;">
    <div class="range-text">{{ showRangeText() }}</div>
    <div class="pagination-controls">
      <pagination-controls
  id="pg1"
  (pageChange)="pPage = $any($event)"
  [maxSize]="7"
  [directionLinks]="true"
  [responsive]="true"
  [autoHide]="false"
  class="ngx-pagination">
</pagination-controls>


    </div>
  </div>
</div>