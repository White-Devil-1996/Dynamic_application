<div class="dashboard-layout" [class.collapsed]="collapsed">
  <div class="overlay" *ngIf="!collapsed && isMobile" (click)="toggleCollapse()"></div>









  <aside class="sidebar" role="navigation" aria-label="Main navigation">
    <header class="topbar-aside">
      <h2 class="brand">{{ appModel.brand.title }}</h2>

      <div class="sidebar-controls">
        <button class="close-btn mobile-only" *ngIf="isMobile" (click)="toggleCollapse()">✕</button>
      </div>
    </header>

    <nav class="nav" aria-label="Primary">
      <ng-container *ngFor="let menu of appModel.menus; trackBy: trackByMenu">
        <ng-container *ngIf="menu.children && menu.children.length; else singleLink">
          <div class="nav-group" [class.active]="isActive(menu)">
            <button class="nav-toggle" (click)="onTopLevelClick(menu)" [attr.aria-expanded]="openSubmenu === menu.id">
              <i *ngIf="menu.icon" [class]="menu.icon" aria-hidden="true" style="margin-right:8px"></i>
              {{ menu.label }}
              <span class="chev" [class.open]="openSubmenu === menu.id">▾</span>
            </button>

            <div class="submenu" *ngIf="openSubmenu === menu.id">
              <a *ngFor="let child of menu.children; trackBy: trackByMenu" [routerLink]="child.route"
                (click)="onChildClick(menu, child)" [class.active]="isActive(child)">
                <i *ngIf="child.icon" [class]="child.icon" aria-hidden="true" style="margin-right:8px"></i>
                {{ child.label }}
              </a>
            </div>
          </div>
        </ng-container>

        <ng-template #singleLink>
          <a [routerLink]="menu.route" (click)="onTopLevelClick(menu)" [class.active]="isActive(menu)">
            <i *ngIf="menu.icon" [class]="menu.icon" aria-hidden="true" style="margin-right:8px"></i>
            {{ menu.label }}
          </a>
        </ng-template>
      </ng-container>
    </nav>

    <footer class="footer">
      <div>
        {{ appModel.footer.copyrightPrefix }} {{ currentYear }} {{ appModel.footer.name }}
      </div>
    </footer>
  </aside>









  <main class="content" [class.dimmed]="!collapsed && isMobile">
    <header class="topbar">
      <div class="left">
        <div>
          <button class="hamburger" (click)="toggleCollapse()" aria-label="Open menu"><i title="Menu"
              class="fa fa-bars text-white marginclass iconclass" aria-hidden="true"></i></button>
        </div>

        <div>
          <h1 class="page-title text-white">{{ appModel.brand.applicationName }}</h1>
        </div>
      </div>




      <div class="right d-flex align-items-center">
        <div class="d-flex flex-column align-items-end me-3 " style="line-height: 1.1;"  *ngIf="!isMobile">
          <small class="text-white">Welcome back {{ appModel.topbar.userLabelPrefix }}</small>
          <small class="text-white">{{ currentDateTime }}</small>
        </div>
        <i class="fa fa-user-circle text-white iconclass me-3" aria-hidden="true"
          title="{{ appModel.topbar.userLabelPrefix }}"></i>
        <i title="Logout" *ngIf="appModel.topbar.showLogout" class="fa fa-sign-out text-white iconclass me-3"
          (click)="logout()" aria-hidden="true"></i>
      </div>
    </header>

    <section class="page-content">
      <router-outlet></router-outlet>
    </section>
  </main>
</div>